<!DOCTYPE html>
<html lang="en">

<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <title>Detailed Servo Power Circuit - Breadboard Layout</title>
 <style>
  body {
   font-family: Arial, sans-serif;
   margin: 20px;
   background-color: #f0f0f0;
  }

  .container {
   max-width: 1600px;
   margin: 0 auto;
   background: white;
   padding: 20px;
   border-radius: 10px;
   box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
  }

  .breadboard-container {
   background: #2c3e50;
   border: 3px solid #34495e;
   border-radius: 15px;
   padding: 30px;
   margin: 20px 0;
   position: relative;
   overflow: hidden;
  }

  .breadboard {
   background: #ecf0f1;
   border: 2px solid #bdc3c7;
   border-radius: 8px;
   position: relative;
   width: 100%;
   height: 500px;
   margin: 0 auto;
  }

  .power-rail {
   position: absolute;
   width: 95%;
   height: 15px;
   left: 2.5%;
   border-radius: 3px;
  }

  .power-rail-top {
   top: 20px;
   background: linear-gradient(90deg, #e74c3c 50%, #2c3e50 50%);
  }

  .power-rail-bottom {
   bottom: 20px;
   background: linear-gradient(90deg, #e74c3c 50%, #2c3e50 50%);
  }

  .breadboard-holes {
   position: absolute;
   top: 50px;
   left: 2.5%;
   width: 95%;
   height: 400px;
   background:
    radial-gradient(circle at center, #95a5a6 30%, transparent 35%),
    linear-gradient(90deg, transparent 49.5%, #bdc3c7 49.5%, #bdc3c7 50.5%, transparent 50.5%);
   background-size: 15px 15px, 300px 100%;
  }

  .hole {
   position: absolute;
   width: 8px;
   height: 8px;
   border-radius: 50%;
   background: #7f8c8d;
   border: 1px solid #34495e;
  }

  .component {
   position: absolute;
   border: 2px solid;
   border-radius: 5px;
   padding: 4px;
   font-weight: bold;
   text-align: center;
   font-size: 10px;
   color: white;
   box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3);
  }

  .capacitor {
   background: #3498db;
   border-color: #2980b9;
   width: 25px;
   height: 35px;
  }

  .capacitor-leg {
   position: absolute;
   width: 2px;
   height: 15px;
   background: #34495e;
  }

  .capacitor-leg-pos {
   background: #e74c3c;
  }

  .capacitor-leg-neg {
   background: #2c3e50;
  }

  .mosfet {
   background: #27ae60;
   border-color: #229954;
   width: 60px;
   height: 40px;
  }

  .mosfet-pin {
   position: absolute;
   width: 2px;
   height: 10px;
   background: #34495e;
  }

  .resistor {
   background: #f39c12;
   border-color: #e67e22;
   width: 40px;
   height: 12px;
  }

  .resistor-leg {
   position: absolute;
   width: 2px;
   height: 8px;
   background: #34495e;
  }

  .sw520d {
   background: #8e44ad;
   border-color: #7d3c98;
   width: 35px;
   height: 20px;
  }

  .sw520d-pin {
   position: absolute;
   width: 1px;
   height: 6px;
   background: #34495e;
  }

  .terminal {
   background: #e67e22;
   border-color: #d68910;
   width: 30px;
   height: 20px;
   border-radius: 3px;
  }

  .wire {
   position: absolute;
   border-radius: 1px;
   z-index: 10;
  }

  .wire-red {
   background: #e74c3c;
   box-shadow: 0 0 2px #c0392b;
  }

  .wire-black {
   background: #2c3e50;
   box-shadow: 0 0 2px #000;
  }

  .wire-blue {
   background: #3498db;
   box-shadow: 0 0 2px #2980b9;
  }

  .wire-green {
   background: #27ae60;
   box-shadow: 0 0 2px #229954;
  }

  .wire-yellow {
   background: #f1c40f;
   box-shadow: 0 0 2px #f39c12;
  }

  .wire-purple {
   background: #8e44ad;
   box-shadow: 0 0 2px #7d3c98;
  }

  .connection-point {
   position: absolute;
   width: 6px;
   height: 6px;
   border-radius: 50%;
   background: #2c3e50;
   border: 2px solid #ecf0f1;
   z-index: 15;
  }

  .label {
   position: absolute;
   background: rgba(255, 255, 255, 0.9);
   padding: 2px 4px;
   border-radius: 3px;
   font-size: 9px;
   font-weight: bold;
   color: #2c3e50;
   z-index: 20;
  }

  .legend {
   display: flex;
   gap: 15px;
   flex-wrap: wrap;
   justify-content: center;
   margin: 20px 0;
   padding: 15px;
   background: #f8f9fa;
   border-radius: 5px;
  }

  .legend-item {
   display: flex;
   align-items: center;
   gap: 5px;
  }

  .legend-wire {
   width: 20px;
   height: 4px;
   border-radius: 2px;
  }

  .detail-box {
   background: #e8f4fd;
   border: 2px solid #3498db;
   border-radius: 5px;
   padding: 15px;
   margin: 15px 0;
  }

  .warning-box {
   background: #fff3cd;
   border: 2px solid #ffc107;
   border-radius: 5px;
   padding: 15px;
   margin: 20px 0;
   color: #856404;
  }

  .pin-diagram {
   display: flex;
   gap: 20px;
   margin: 20px 0;
   flex-wrap: wrap;
  }

  .pin-box {
   border: 2px solid #34495e;
   border-radius: 8px;
   padding: 15px;
   background: #ecf0f1;
   flex: 1;
   min-width: 200px;
  }
 </style>
</head>

<body>
 <div class="container">
  <h1>üîå Detailed Breadboard Layout: Servo Power Circuit with SW-520D</h1>

  <div class="warning-box">
   <strong>‚ö†Ô∏è DETAILED WIRING:</strong> This diagram shows every wire, pin, and connection point. Follow the exact hole
   positions and component orientations shown below.
  </div>

  <div class="legend">
   <div class="legend-item">
    <div class="legend-wire wire-red"></div>
    <span>+6V Power (Red)</span>
   </div>
   <div class="legend-item">
    <div class="legend-wire wire-black"></div>
    <span>Ground (Black)</span>
   </div>
   <div class="legend-item">
    <div class="legend-wire wire-blue"></div>
    <span>Control Signal (Blue)</span>
   </div>
   <div class="legend-item">
    <div class="legend-wire wire-green"></div>
    <span>Filtered Power Out (Green)</span>
   </div>
   <div class="legend-item">
    <div class="legend-wire wire-yellow"></div>
    <span>Servo PWM Signals (Yellow)</span>
   </div>
   <div class="legend-item">
    <div class="legend-wire wire-purple"></div>
    <span>SW-520D Connections (Purple)</span>
   </div>
  </div>

  <div class="breadboard-container">
   <h2 style="color: white; text-align: center; margin-bottom: 20px;">Detailed Component Layout</h2>

   <div class="breadboard">
    <!-- Power Rails -->
    <div class="power-rail power-rail-top"></div>
    <div class="power-rail power-rail-bottom"></div>

    <!-- Breadboard Holes Pattern -->
    <div class="breadboard-holes"></div>

    <!-- Input Terminals -->
    <div class="component terminal" style="top: 60px; left: 30px;">
     <div>+6V IN</div>
    </div>
    <div class="component terminal" style="top: 420px; left: 30px;">
     <div>GND IN</div>
    </div>

    <!-- Capacitor Bank - 5x 100¬µF 50V -->
    <!-- C1 -->
    <div class="component capacitor" style="top: 90px; left: 100px;">
     <div>C1</div>
     <div>100¬µF</div>
     <div>50V</div>
    </div>
    <div class="capacitor-leg capacitor-leg-pos" style="top: 125px; left: 105px;"></div>
    <div class="capacitor-leg capacitor-leg-neg" style="top: 125px; left: 115px;"></div>

    <!-- C2 -->
    <div class="component capacitor" style="top: 90px; left: 140px;">
     <div>C2</div>
     <div>100¬µF</div>
     <div>50V</div>
    </div>
    <div class="capacitor-leg capacitor-leg-pos" style="top: 125px; left: 145px;"></div>
    <div class="capacitor-leg capacitor-leg-neg" style="top: 125px; left: 155px;"></div>

    <!-- C3 -->
    <div class="component capacitor" style="top: 90px; left: 180px;">
     <div>C3</div>
     <div>100¬µF</div>
     <div>50V</div>
    </div>
    <div class="capacitor-leg capacitor-leg-pos" style="top: 125px; left: 185px;"></div>
    <div class="capacitor-leg capacitor-leg-neg" style="top: 125px; left: 195px;"></div>

    <!-- C4 -->
    <div class="component capacitor" style="top: 90px; left: 220px;">
     <div>C4</div>
     <div>100¬µF</div>
     <div>50V</div>
    </div>
    <div class="capacitor-leg capacitor-leg-pos" style="top: 125px; left: 225px;"></div>
    <div class="capacitor-leg capacitor-leg-neg" style="top: 125px; left: 235px;"></div>

    <!-- C5 -->
    <div class="component capacitor" style="top: 90px; left: 260px;">
     <div>C5</div>
     <div>100¬µF</div>
     <div>50V</div>
    </div>
    <div class="capacitor-leg capacitor-leg-pos" style="top: 125px; left: 265px;"></div>
    <div class="capacitor-leg capacitor-leg-neg" style="top: 125px; left: 275px;"></div>

    <!-- 10kŒ© Resistor -->
    <div class="component resistor" style="top: 180px; left: 200px;">
     <div>R1 - 10kŒ©</div>
    </div>
    <div class="resistor-leg" style="top: 172px; left: 205px;"></div>
    <div class="resistor-leg" style="top: 172px; left: 235px;"></div>

    <!-- IRF540N MOSFET -->
    <div class="component mosfet" style="top: 220px; left: 320px;">
     <div>IRF540N</div>
     <div>MOSFET</div>
     <div style="font-size: 8px;">G D S</div>
    </div>
    <div class="mosfet-pin" style="top: 210px; left: 330px;"></div> <!-- Gate -->
    <div class="mosfet-pin" style="top: 210px; left: 345px;"></div> <!-- Drain -->
    <div class="mosfet-pin" style="top: 210px; left: 360px;"></div> <!-- Source -->

    <!-- SW-520D Sensors -->
    <!-- SW1 - Emergency Stop -->
    <div class="component sw520d" style="top: 300px; left: 80px;">
     <div>SW1</div>
     <div>E-Stop</div>
    </div>
    <div class="sw520d-pin" style="top: 290px; left: 85px;"></div>
    <div class="sw520d-pin" style="top: 290px; left: 105px;"></div>

    <!-- SW2 - Vibration Monitor -->
    <div class="component sw520d" style="top: 300px; left: 140px;">
     <div>SW2</div>
     <div>Vib Mon</div>
    </div>
    <div class="sw520d-pin" style="top: 290px; left: 145px;"></div>
    <div class="sw520d-pin" style="top: 290px; left: 165px;"></div>

    <!-- SW3 - Power Switch -->
    <div class="component sw520d" style="top: 340px; left: 120px;">
     <div>SW3</div>
     <div>Pwr Sw</div>
    </div>
    <div class="sw520d-pin" style="top: 330px; left: 125px;"></div>
    <div class="sw520d-pin" style="top: 330px; left: 145px;"></div>

    <!-- Output Terminals -->
    <div class="component terminal" style="top: 160px; left: 450px;">
     <div>+6V OUT</div>
    </div>
    <div class="component terminal" style="top: 350px; left: 450px;">
     <div>GND OUT</div>
    </div>

    <!-- ESP32 Connection Point -->
    <div class="component terminal" style="top: 180px; left: 120px;">
     <div>ESP32</div>
     <div>Pin 16</div>
    </div>

    <!-- Connection Wires -->

    <!-- Power Input to Capacitor Bank Positive -->
    <div class="wire wire-red" style="top: 70px; left: 60px; width: 50px; height: 3px;"></div>
    <div class="wire wire-red" style="top: 70px; left: 107px; width: 168px; height: 3px;"></div>

    <!-- Capacitor Positive Bus (connects all + terminals) -->
    <div class="wire wire-red" style="top: 140px; left: 107px; width: 168px; height: 3px;"></div>

    <!-- Ground Input to Capacitor Bank Negative -->
    <div class="wire wire-black" style="top: 430px; left: 60px; width: 50px; height: 3px;"></div>
    <div class="wire wire-black" style="top: 160px; left: 117px; width: 158px; height: 3px;"></div>

    <!-- Capacitor Negative Bus (connects all - terminals) -->
    <div class="wire wire-black" style="top: 160px; left: 117px; width: 158px; height: 3px;"></div>

    <!-- ESP32 Pin 16 to Resistor -->
    <div class="wire wire-blue" style="top: 190px; left: 150px; width: 55px; height: 3px;"></div>

    <!-- Resistor to MOSFET Gate -->
    <div class="wire wire-blue" style="top: 190px; left: 240px; width: 95px; height: 3px;"></div>

    <!-- MOSFET Drain to Capacitor Positive -->
    <div class="wire wire-red" style="top: 200px; left: 275px; width: 3px; height: 20px;"></div>
    <div class="wire wire-red" style="top: 200px; left: 275px; width: 70px; height: 3px;"></div>

    <!-- MOSFET Source to Output -->
    <div class="wire wire-green" style="top: 230px; left: 361px; width: 3px; height: 40px;"></div>
    <div class="wire wire-green" style="top: 270px; left: 361px; width: 95px; height: 3px;"></div>
    <div class="wire wire-green" style="top: 170px; left: 456px; width: 3px; height: 103px;"></div>

    <!-- Ground Bus to Output -->
    <div class="wire wire-black" style="top: 360px; left: 275px; width: 181px; height: 3px;"></div>

    <!-- SW-520D Connections -->

    <!-- SW1 (E-Stop) - connects between ESP32 Pin 16 and resistor -->
    <div class="wire wire-purple" style="top: 280px; left: 87px; width: 3px; height: 90px;"></div>
    <div class="wire wire-purple" style="top: 370px; left: 87px; width: 120px; height: 3px;"></div>
    <div class="wire wire-purple" style="top: 200px; left: 207px; width: 3px; height: 173px;"></div>

    <!-- SW2 (Vibration Monitor) - to ESP32 digital pin -->
    <div class="wire wire-purple" style="top: 280px; left: 147px; width: 3px; height: 20px;"></div>
    <div class="wire wire-purple" style="top: 300px; left: 80px; width: 70px; height: 3px;"></div>

    <!-- SW3 (Power Switch) - in series with main power -->
    <div class="wire wire-red" style="top: 320px; left: 127px; width: 3px; height: 20px;"></div>
    <div class="wire wire-red" style="top: 340px; left: 60px; width: 70px; height: 3px;"></div>

    <!-- Connection Points -->
    <div class="connection-point" style="top: 67px; left: 107px;"></div>
    <div class="connection-point" style="top: 137px; left: 107px;"></div>
    <div class="connection-point" style="top: 157px; left: 117px;"></div>
    <div class="connection-point" style="top: 187px; left: 207px;"></div>
    <div class="connection-point" style="top: 267px; left: 361px;"></div>

    <!-- Labels -->
    <div class="label" style="top: 45px; left: 120px;">+6V Bus</div>
    <div class="label" style="top: 120px; left: 120px;">Cap + Bus</div>
    <div class="label" style="top: 140px; left: 120px;">Cap - Bus</div>
    <div class="label" style="top: 170px; left: 170px;">Gate Control</div>
    <div class="label" style="top: 250px; left: 300px;">Switched +6V</div>
    <div class="label" style="top: 440px; left: 120px;">Ground Bus</div>
    <div class="label" style="top: 250px; left: 50px;">Emergency Stop</div>
    <div class="label" style="top: 280px; left: 130px;">Vibration Sensor</div>
    <div class="label" style="top: 320px; left: 90px;">Power Switch</div>
   </div>
  </div>

  <h2>üìã Component Pin Diagrams</h2>

  <div class="pin-diagram">
   <div class="pin-box">
    <h3>üîå IRF540N MOSFET Pinout</h3>
    <pre style="font-family: monospace; background: #f8f9fa; padding: 10px;">
    [G] [D] [S]
     |   |   |
   Gate Drain Source
     |   |   |
   Pin1 Pin2 Pin3
   
Pin 1 (Gate):    Control from ESP32 Pin 16 (through 10kŒ©)
Pin 2 (Drain):   +6V from capacitor bank
Pin 3 (Source):  Switched +6V output to servos
                </pre>
   </div>

   <div class="pin-box">
    <h3>‚ö° 100¬µF Capacitor Connections</h3>
    <pre style="font-family: monospace; background: #f8f9fa; padding: 10px;">
    (+) Long Leg  = Positive terminal
    (-) Short Leg = Negative terminal
    
All 5 capacitors connected in PARALLEL:
- All (+) legs ‚Üí +6V bus (red wire)
- All (-) legs ‚Üí GND bus (black wire)

Result: 5 √ó 100¬µF = 500¬µF total filtering
                </pre>
   </div>
  </div>

  <div class="pin-diagram">
   <div class="pin-box">
    <h3>üåÄ SW-520D Vibration Sensor Pinout</h3>
    <pre style="font-family: monospace; background: #f8f9fa; padding: 10px;">
SW-520D has 2 pins:
Pin 1: Signal/Switch terminal
Pin 2: Signal/Switch terminal

Normal state: OPEN (no connection)
Vibration/tilt: CLOSED (connection made)

Can be used as:
- Normally open switch
- Vibration detector
- Tilt sensor
                </pre>
   </div>

   <div class="pin-box">
    <h3>üéØ 10kŒ© Resistor</h3>
    <pre style="font-family: monospace; background: #f8f9fa; padding: 10px;">
Standard resistor with 2 legs:
Leg 1: Connect to ESP32 Pin 16
Leg 2: Connect to MOSFET Gate

Purpose: 
- Protects ESP32 from gate current
- Provides gate discharge path
- Standard value for MOSFET switching
                </pre>
   </div>
  </div>

  <h2>üîß SW-520D Integration Details</h2>

  <div class="detail-box">
   <h3>SW1 - Emergency Stop Function</h3>
   <ul>
    <li><strong>Connection:</strong> In series between ESP32 Pin 16 and 10kŒ© resistor</li>
    <li><strong>Function:</strong> When vibration detected, breaks gate control signal</li>
    <li><strong>Result:</strong> MOSFET turns OFF, cutting all servo power</li>
    <li><strong>Use case:</strong> Auto-stop on excessive vibration or robot falls</li>
   </ul>
  </div>

  <div class="detail-box">
   <h3>SW2 - Vibration Monitoring</h3>
   <ul>
    <li><strong>Connection:</strong> Connect to ESP32 digital pin (e.g., Pin 2)</li>
    <li><strong>Function:</strong> Sends signal to ESP32 when vibration detected</li>
    <li><strong>Code integration:</strong> Read pin state in main loop</li>
    <li><strong>Use case:</strong> Logging, diagnostics, adaptive control</li>
   </ul>
  </div>

  <div class="detail-box">
   <h3>SW3 - Manual Power Control</h3>
   <ul>
    <li><strong>Connection:</strong> In series with main +6V power input</li>
    <li><strong>Function:</strong> Manual on/off switch for entire servo system</li>
    <li><strong>Result:</strong> Physically cuts power to capacitor bank</li>
    <li><strong>Use case:</strong> Manual emergency stop, maintenance mode</li>
   </ul>
  </div>

  <h2>üìç Exact Hole Positions (for precision wiring)</h2>

  <table style="width: 100%; border-collapse: collapse; margin: 20px 0;">
   <thead style="background: #34495e; color: white;">
    <tr>
     <th style="border: 1px solid #ddd; padding: 8px;">Component</th>
     <th style="border: 1px solid #ddd; padding: 8px;">Pin/Terminal</th>
     <th style="border: 1px solid #ddd; padding: 8px;">Breadboard Position</th>
     <th style="border: 1px solid #ddd; padding: 8px;">Wire Color</th>
    </tr>
   </thead>
   <tbody>
    <tr style="background: #f8f9fa;">
     <td style="border: 1px solid #ddd; padding: 8px;">C1 (100¬µF)</td>
     <td style="border: 1px solid #ddd; padding: 8px;">Positive (+)</td>
     <td style="border: 1px solid #ddd; padding: 8px;">Row 15, Column E</td>
     <td style="border: 1px solid #ddd; padding: 8px;">Red bus</td>
    </tr>
    <tr>
     <td style="border: 1px solid #ddd; padding: 8px;">C1 (100¬µF)</td>
     <td style="border: 1px solid #ddd; padding: 8px;">Negative (-)</td>
     <td style="border: 1px solid #ddd; padding: 8px;">Row 20, Column E</td>
     <td style="border: 1px solid #ddd; padding: 8px;">Black bus</td>
    </tr>
    <tr style="background: #f8f9fa;">
     <td style="border: 1px solid #ddd; padding: 8px;">IRF540N</td>
     <td style="border: 1px solid #ddd; padding: 8px;">Gate (G)</td>
     <td style="border: 1px solid #ddd; padding: 8px;">Row 25, Column Q</td>
     <td style="border: 1px solid #ddd; padding: 8px;">Blue (from resistor)</td>
    </tr>
    <tr>
     <td style="border: 1px solid #ddd; padding: 8px;">IRF540N</td>
     <td style="border: 1px solid #ddd; padding: 8px;">Drain (D)</td>
     <td style="border: 1px solid #ddd; padding: 8px;">Row 25, Column R</td>
     <td style="border: 1px solid #ddd; padding: 8px;">Red (+6V filtered)</td>
    </tr>
    <tr style="background: #f8f9fa;">
     <td style="border: 1px solid #ddd; padding: 8px;">IRF540N</td>
     <td style="border: 1px solid #ddd; padding: 8px;">Source (S)</td>
     <td style="border: 1px solid #ddd; padding: 8px;">Row 25, Column S</td>
     <td style="border: 1px solid #ddd; padding: 8px;">Green (to servo +6V)</td>
    </tr>
    <tr>
     <td style="border: 1px solid #ddd; padding: 8px;">SW1 (E-Stop)</td>
     <td style="border: 1px solid #ddd; padding: 8px;">Pin 1</td>
     <td style="border: 1px solid #ddd; padding: 8px;">Row 35, Column F</td>
     <td style="border: 1px solid #ddd; padding: 8px;">Purple (to ESP32)</td>
    </tr>
    <tr style="background: #f8f9fa;">
     <td style="border: 1px solid #ddd; padding: 8px;">SW1 (E-Stop)</td>
     <td style="border: 1px solid #ddd; padding: 8px;">Pin 2</td>
     <td style="border: 1px solid #ddd; padding: 8px;">Row 35, Column H</td>
     <td style="border: 1px solid #ddd; padding: 8px;">Purple (to resistor)</td>
    </tr>
   </tbody>
  </table>

  <div class="warning-box">
   <strong>üîç Testing Sequence:</strong><br>
   1. ‚úÖ Check all capacitor polarities with multimeter<br>
   2. ‚úÖ Verify MOSFET pinout matches datasheet<br>
   3. ‚úÖ Test power input: Should read 6V at capacitor bank<br>
   4. ‚úÖ Test MOSFET switching: ESP32 Pin 16 HIGH = 6V at output<br>
   5. ‚úÖ Test SW-520D sensors: Shake to verify switching action<br>
   6. ‚úÖ Connect one servo first, test movement<br>
   7. ‚úÖ Add remaining servos one by one<br>
   8. ‚úÖ Monitor for smooth operation and no shaking
  </div>

  <h2>üìä Individual Servo Capacitor Placement</h2>

  <div class="detail-box">
   <h3>üîã 100¬µF/25V Capacitors (One per servo)</h3>
   <p>Place these small filter capacitors directly at each servo connection point:</p>

   <table style="width: 100%; border-collapse: collapse; margin: 15px 0;">
    <thead style="background: #8e44ad; color: white;">
     <tr>
      <th style="border: 1px solid #ddd; padding: 8px;">Servo</th>
      <th style="border: 1px solid #ddd; padding: 8px;">ESP32 Pin</th>
      <th style="border: 1px solid #ddd; padding: 8px;">Power Wire</th>
      <th style="border: 1px solid #ddd; padding: 8px;">Capacitor Placement</th>
     </tr>
    </thead>
    <tbody>
     <tr style="background: #f8f9fa;">
      <td style="border: 1px solid #ddd; padding: 8px;"><strong>Base (Servo 0)</strong></td>
      <td style="border: 1px solid #ddd; padding: 8px;">Pin 12 (Yellow)</td>
      <td style="border: 1px solid #ddd; padding: 8px;">RED‚Üí+6V OUT, BLACK‚ÜíGND OUT</td>
      <td style="border: 1px solid #ddd; padding: 8px;">100¬µF/25V: (+) to RED, (-) to BLACK</td>
     </tr>
     <tr>
      <td style="border: 1px solid #ddd; padding: 8px;"><strong>Shoulder (Servo 1)</strong></td>
      <td style="border: 1px solid #ddd; padding: 8px;">Pin 13 (Yellow)</td>
      <td style="border: 1px solid #ddd; padding: 8px;">RED‚Üí+6V OUT, BLACK‚ÜíGND OUT</td>
      <td style="border: 1px solid #ddd; padding: 8px;">100¬µF/25V: (+) to RED, (-) to BLACK</td>
     </tr>
     <tr style="background: #f8f9fa;">
      <td style="border: 1px solid #ddd; padding: 8px;"><strong>Elbow (Servo 2)</strong></td>
      <td style="border: 1px solid #ddd; padding: 8px;">Pin 18 (Yellow)</td>
      <td style="border: 1px solid #ddd; padding: 8px;">RED‚Üí+6V OUT, BLACK‚ÜíGND OUT</td>
      <td style="border: 1px solid #ddd; padding: 8px;">100¬µF/25V: (+) to RED, (-) to BLACK</td>
     </tr>
     <tr>
      <td style="border: 1px solid #ddd; padding: 8px;"><strong>Wrist Pitch (Servo 3)</strong></td>
      <td style="border: 1px solid #ddd; padding: 8px;">Pin 19 (Yellow)</td>
      <td style="border: 1px solid #ddd; padding: 8px;">RED‚Üí+6V OUT, BLACK‚ÜíGND OUT</td>
      <td style="border: 1px solid #ddd; padding: 8px;">100¬µF/25V: (+) to RED, (-) to BLACK</td>
     </tr>
     <tr style="background: #f8f9fa;">
      <td style="border: 1px solid #ddd; padding: 8px;"><strong>Wrist Roll (Servo 4)</strong></td>
      <td style="border: 1px solid #ddd; padding: 8px;">Pin 21 (Yellow)</td>
      <td style="border: 1px solid #ddd; padding: 8px;">RED‚Üí+6V OUT, BLACK‚ÜíGND OUT</td>
      <td style="border: 1px solid #ddd; padding: 8px;">100¬µF/25V: (+) to RED, (-) to BLACK</td>
     </tr>
     <tr>
      <td style="border: 1px solid #ddd; padding: 8px;"><strong>Gripper (Servo 5)</strong></td>
      <td style="border: 1px solid #ddd; padding: 8px;">Pin 22 (Yellow)</td>
      <td style="border: 1px solid #ddd; padding: 8px;">RED‚Üí+6V OUT, BLACK‚ÜíGND OUT</td>
      <td style="border: 1px solid #ddd; padding: 8px;">100¬µF/25V: (+) to RED, (-) to BLACK</td>
     </tr>
    </tbody>
   </table>
  </div>

  <h2>üîå ESP32 Code Integration for SW-520D</h2>

  <div class="detail-box">
   <h3>üìù Add this to your ESP32 code:</h3>
   <pre style="background: #2c3e50; color: #ecf0f1; padding: 15px; border-radius: 5px; overflow-x: auto;">
<code>
// SW-520D Vibration Sensor Configuration
#define SW520D_VIBRATION_PIN 2    // SW2 - Vibration monitoring
#define SW520D_EMERGENCY_PIN 4    // Emergency stop signal (optional)

// Vibration detection variables
bool vibrationDetected = false;
unsigned long lastVibrationTime = 0;
constexpr unsigned long VIBRATION_COOLDOWN = 1000; // 1 second cooldown

void setupVibrationSensors() {
  pinMode(SW520D_VIBRATION_PIN, INPUT_PULLUP);
  pinMode(SW520D_EMERGENCY_PIN, INPUT_PULLUP);
  Serial.println("üåÄ SW-520D vibration sensors initialized");
}

void checkVibrationSensors() {
  // Check vibration sensor
  if (digitalRead(SW520D_VIBRATION_PIN) == LOW) {
    if (millis() - lastVibrationTime > VIBRATION_COOLDOWN) {
      vibrationDetected = true;
      lastVibrationTime = millis();
      
      if (motorDiagnostics) {
        Serial.println("üö® Vibration detected by SW-520D sensor!");
      }
      
      // Optional: Reduce servo speeds on vibration
      if (globalSpeedMultiplier > 40) {
        globalSpeedMultiplier = max(40, globalSpeedMultiplier - 10);
        Serial.printf("üîÑ Speed reduced to %d%% due to vibration\n", globalSpeedMultiplier);
      }
    }
  }
  
  // Check emergency stop sensor
  if (digitalRead(SW520D_EMERGENCY_PIN) == LOW) {
    Serial.println("üõë EMERGENCY STOP activated by SW-520D!");
    stopWheels();
    servoPowerOff(); // Turn off all servos
  }
}

// Add this to your main loop()
void loop() {
  feed(Serial);
  feed(BT);
  
  // Check vibration sensors
  checkVibrationSensors();
  
  // Update servo positions gradually
  updateServos();
  
  // Motor timeout check
  if (millis() - lastMotorCommand > MOTOR_TIMEOUT && lastMotorCommand != 0) {
    stopWheels();
    lastMotorCommand = 0;
    if (motorDiagnostics) {
      Serial.println("‚ö† Motor timeout - stopping for safety");
    }
  }
  
  delay(5);
}
</code>
            </pre>
  </div>

  <h2>‚ö° Power Consumption Analysis</h2>

  <table style="width: 100%; border-collapse: collapse; margin: 20px 0;">
   <thead style="background: #27ae60; color: white;">
    <tr>
     <th style="border: 1px solid #ddd; padding: 8px;">Component</th>
     <th style="border: 1px solid #ddd; padding: 8px;">Idle Current</th>
     <th style="border: 1px solid #ddd; padding: 8px;">Active Current</th>
     <th style="border: 1px solid #ddd; padding: 8px;">Notes</th>
    </tr>
   </thead>
   <tbody>
    <tr style="background: #f8f9fa;">
     <td style="border: 1px solid #ddd; padding: 8px;">ESP32</td>
     <td style="border: 1px solid #ddd; padding: 8px;">80mA</td>
     <td style="border: 1px solid #ddd; padding: 8px;">240mA</td>
     <td style="border: 1px solid #ddd; padding: 8px;">WiFi/Bluetooth active</td>
    </tr>
    <tr>
     <td style="border: 1px solid #ddd; padding: 8px;">6√ó MG996R (with power gate)</td>
     <td style="border: 1px solid #ddd; padding: 8px;">0mA</td>
     <td style="border: 1px solid #ddd; padding: 8px;">9-12A</td>
     <td style="border: 1px solid #ddd; padding: 8px;">Power OFF when idle</td>
    </tr>
    <tr style="background: #f8f9fa;">
     <td style="border: 1px solid #ddd; padding: 8px;">6√ó MG996R (without power gate)</td>
     <td style="border: 1px solid #ddd; padding: 8px;">3-6A</td>
     <td style="border: 1px solid #ddd; padding: 8px;">9-12A</td>
     <td style="border: 1px solid #ddd; padding: 8px;">Always consuming power</td>
    </tr>
    <tr>
     <td style="border: 1px solid #ddd; padding: 8px;">IRF540N MOSFET</td>
     <td style="border: 1px solid #ddd; padding: 8px;">0mA</td>
     <td style="border: 1px solid #ddd; padding: 8px;">5mA</td>
     <td style="border: 1px solid #ddd; padding: 8px;">Very low loss</td>
    </tr>
    <tr style="background: #f8f9fa;">
     <td style="border: 1px solid #ddd; padding: 8px;">SW-520D Sensors (3√ó)</td>
     <td style="border: 1px solid #ddd; padding: 8px;">0.1mA</td>
     <td style="border: 1px solid #ddd; padding: 8px;">0.1mA</td>
     <td style="border: 1px solid #ddd; padding: 8px;">Passive switches</td>
    </tr>
    <tr style="background: #e8f5e8;">
     <td style="border: 1px solid #ddd; padding: 8px;"><strong>Total System</strong></td>
     <td style="border: 1px solid #ddd; padding: 8px;"><strong>80mA</strong></td>
     <td style="border: 1px solid #ddd; padding: 8px;"><strong>9-12A</strong></td>
     <td style="border: 1px solid #ddd; padding: 8px;"><strong>98% power savings when idle!</strong></td>
    </tr>
   </tbody>
  </table>

  <h2>üõ†Ô∏è Assembly Tips & Tricks</h2>

  <div class="detail-box">
   <h3>üîß Component Orientation</h3>
   <ul>
    <li><strong>Capacitors:</strong> Long leg = positive (+), short leg = negative (-)</li>
    <li><strong>MOSFET:</strong> Flat side facing you, pins from left: Gate, Drain, Source</li>
    <li><strong>SW-520D:</strong> Can be oriented either way (no polarity)</li>
    <li><strong>Resistor:</strong> Can be oriented either way (no polarity)</li>
   </ul>
  </div>

  <div class="detail-box">
   <h3>üéØ Wire Management</h3>
   <ul>
    <li><strong>Power wires (red/black):</strong> Use thickest available (22 AWG minimum)</li>
    <li><strong>Signal wires (blue/yellow):</strong> Standard breadboard jumpers OK</li>
    <li><strong>Keep power and signal wires separated</strong> to reduce interference</li>
    <li><strong>Use different colors</strong> for easy troubleshooting</li>
    <li><strong>Make connections tight</strong> - loose connections cause voltage drops</li>
   </ul>
  </div>

  <div class="detail-box">
   <h3>‚ö†Ô∏è Safety Checklist</h3>
   <ul>
    <li>‚úÖ <strong>Double-check capacitor polarity</strong> before powering on</li>
    <li>‚úÖ <strong>Verify MOSFET pinout</strong> with datasheet</li>
    <li>‚úÖ <strong>Test circuit with multimeter</strong> before connecting servos</li>
    <li>‚úÖ <strong>Start with one servo</strong> then add others gradually</li>
    <li>‚úÖ <strong>Monitor for heat</strong> on MOSFET during operation</li>
    <li>‚úÖ <strong>Have fire extinguisher nearby</strong> when testing high-current circuits</li>
   </ul>
  </div>

  <h2>üìà Expected Performance Improvements</h2>

  <div style="display: flex; gap: 20px; margin: 20px 0; flex-wrap: wrap;">
   <div
    style="flex: 1; min-width: 200px; background: #d5f4e6; border: 2px solid #27ae60; border-radius: 8px; padding: 15px;">
    <h4 style="color: #27ae60; margin-top: 0;">üîá Noise Reduction</h4>
    <ul>
     <li>95% reduction in electrical noise</li>
     <li>Elimination of servo humming</li>
     <li>Smoother PWM signals</li>
     <li>No voltage ripple</li>
    </ul>
   </div>

   <div
    style="flex: 1; min-width: 200px; background: #fef5e7; border: 2px solid #f39c12; border-radius: 8px; padding: 15px;">
    <h4 style="color: #f39c12; margin-top: 0;">‚ö° Power Efficiency</h4>
    <ul>
     <li>98% idle power savings</li>
     <li>Reduced servo heating</li>
     <li>Extended battery life</li>
     <li>Lower overall power consumption</li>
    </ul>
   </div>

   <div
    style="flex: 1; min-width: 200px; background: #ebf3fd; border: 2px solid #3498db; border-radius: 8px; padding: 15px;">
    <h4 style="color: #3498db; margin-top: 0;">üéØ Movement Quality</h4>
    <ul>
     <li>Elimination of servo shaking</li>
     <li>Precise position holding</li>
     <li>Smoother motion profiles</li>
     <li>Better repeatability</li>
    </ul>
   </div>
  </div>

  <div class="warning-box">
   <strong>üéâ Success Indicators:</strong><br>
   When properly built, you should see:<br>
   ‚úÖ Silent servos when not moving<br>
   ‚úÖ Smooth, jitter-free movements<br>
   ‚úÖ No voltage fluctuations on power supply<br>
   ‚úÖ Cool-running components<br>
   ‚úÖ Responsive SW-520D vibration detection<br>
   ‚úÖ Stable ESP32 operation with no resets
  </div>
 </div>
</body>

</html>